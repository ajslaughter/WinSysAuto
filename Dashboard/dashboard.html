<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WinSysAuto - Windows System Administration Dashboard</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <!-- Settings Sidebar -->
    <aside class="settings-sidebar" id="settingsSidebar" aria-label="Settings Panel">
        <div class="sidebar-header">
            <h2>Settings</h2>
            <button class="close-btn" id="closeSidebar" aria-label="Close Settings">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"/>
                </svg>
            </button>
        </div>
        <div class="sidebar-content">
            <div class="setting-group">
                <h3>Alert Thresholds</h3>
                <div class="setting-item">
                    <label for="cpuWarning">CPU Warning (%)</label>
                    <input type="number" id="cpuWarning" value="70" min="0" max="100">
                </div>
                <div class="setting-item">
                    <label for="cpuCritical">CPU Critical (%)</label>
                    <input type="number" id="cpuCritical" value="90" min="0" max="100">
                </div>
                <div class="setting-item">
                    <label for="memoryWarning">Memory Warning (%)</label>
                    <input type="number" id="memoryWarning" value="75" min="0" max="100">
                </div>
                <div class="setting-item">
                    <label for="memoryCritical">Memory Critical (%)</label>
                    <input type="number" id="memoryCritical" value="90" min="0" max="100">
                </div>
                <div class="setting-item">
                    <label for="diskWarning">Disk Warning (%)</label>
                    <input type="number" id="diskWarning" value="80" min="0" max="100">
                </div>
                <div class="setting-item">
                    <label for="diskCritical">Disk Critical (%)</label>
                    <input type="number" id="diskCritical" value="95" min="0" max="100">
                </div>
            </div>
            <div class="setting-group">
                <h3>Refresh Settings</h3>
                <div class="setting-item">
                    <label for="refreshInterval">Refresh Interval (seconds)</label>
                    <select id="refreshInterval">
                        <option value="15">15 seconds</option>
                        <option value="30" selected>30 seconds</option>
                        <option value="60">60 seconds</option>
                        <option value="120">2 minutes</option>
                        <option value="300">5 minutes</option>
                    </select>
                </div>
                <div class="setting-item">
                    <label class="checkbox-label">
                        <input type="checkbox" id="autoRefresh" checked>
                        <span>Auto-refresh enabled</span>
                    </label>
                </div>
            </div>
            <div class="setting-group">
                <h3>Theme</h3>
                <div class="setting-item">
                    <label for="theme">Color Theme</label>
                    <select id="theme">
                        <option value="light">Light</option>
                        <option value="dark">Dark</option>
                    </select>
                </div>
            </div>
            <div class="setting-group">
                <button class="btn btn-primary" id="saveSettings">Save Settings</button>
            </div>
        </div>
    </aside>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Top Header -->
        <header class="top-header" role="banner">
            <div class="header-content">
                <div class="header-left">
                    <h1>WinSysAuto</h1>
                    <div class="domain-info">
                        <span id="domainName">CONTOSO.LOCAL</span>
                        <span class="separator">|</span>
                        <span id="serverName">DC01</span>
                    </div>
                </div>
                <div class="header-right">
                    <div class="last-updated">
                        Last updated: <span id="lastUpdated">--</span>
                    </div>
                    <button class="icon-btn" id="openSettings" aria-label="Open Settings" title="Settings">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"/>
                        </svg>
                    </button>
                </div>
            </div>
        </header>

        <!-- Hero Section: System Health Overview -->
        <section class="hero-section" aria-labelledby="health-title">
            <h2 id="health-title" class="section-title">System Health Overview</h2>
            <div class="health-cards">
                <div class="health-card" id="overallHealthCard">
                    <div class="card-icon health-icon">
                        <svg width="32" height="32" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                        </svg>
                    </div>
                    <div class="card-content">
                        <div class="card-label">Overall Health</div>
                        <div class="card-value" id="healthScore">--</div>
                        <div class="card-status" id="healthTrend">
                            <span class="trend-icon">→</span>
                            <span class="trend-text">Stable</span>
                        </div>
                    </div>
                </div>
                <div class="health-card critical-card">
                    <div class="card-icon">
                        <svg width="32" height="32" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
                        </svg>
                    </div>
                    <div class="card-content">
                        <div class="card-label">Critical Issues</div>
                        <div class="card-value" id="criticalCount">0</div>
                        <div class="card-status">Requires immediate attention</div>
                    </div>
                </div>
                <div class="health-card warning-card">
                    <div class="card-icon">
                        <svg width="32" height="32" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                        </svg>
                    </div>
                    <div class="card-content">
                        <div class="card-label">Warnings</div>
                        <div class="card-value" id="warningCount">0</div>
                        <div class="card-status">Review when possible</div>
                    </div>
                </div>
                <div class="health-card">
                    <div class="card-icon">
                        <svg width="32" height="32" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M7 9a2 2 0 012-2h6a2 2 0 012 2v6a2 2 0 01-2 2H9a2 2 0 01-2-2V9z"/>
                            <path d="M5 3a2 2 0 00-2 2v6a2 2 0 002 2V5h8a2 2 0 00-2-2H5z"/>
                        </svg>
                    </div>
                    <div class="card-content">
                        <div class="card-label">Last Backup</div>
                        <div class="card-value small" id="lastBackup">--</div>
                        <div class="card-status" id="backupStatus">
                            <span class="status-dot success"></span>
                            <span>Success</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Quick Actions Section -->
        <section class="quick-actions-section" aria-labelledby="actions-title">
            <h2 id="actions-title" class="section-title">Quick Actions</h2>
            <div class="action-buttons">
                <button class="action-btn primary" id="btnHealthCheck" aria-label="Run Health Check">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd"/>
                    </svg>
                    <span>Run Health Check</span>
                </button>
                <button class="action-btn" id="btnBackup" aria-label="Backup Now">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M7 9a2 2 0 012-2h6a2 2 0 012 2v6a2 2 0 01-2 2H9a2 2 0 01-2-2V9z"/>
                        <path d="M5 3a2 2 0 00-2 2v6a2 2 0 002 2V5h8a2 2 0 00-2-2H5z"/>
                    </svg>
                    <span>Backup Now</span>
                </button>
                <button class="action-btn" id="btnAddUsers" aria-label="Add Users from CSV">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"/>
                    </svg>
                    <span>Add Users</span>
                </button>
                <button class="action-btn" id="btnSecurityAudit" aria-label="Run Security Audit">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                    </svg>
                    <span>Security Audit</span>
                </button>
                <button class="action-btn" id="btnGenerateReport" aria-label="Generate System Report">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v3.586l-1.293-1.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V8z" clip-rule="evenodd"/>
                    </svg>
                    <span>Generate Report</span>
                </button>
            </div>
        </section>

        <!-- System Resources Section -->
        <section class="resources-section" aria-labelledby="resources-title">
            <h2 id="resources-title" class="section-title">System Resources</h2>
            <div class="resource-cards">
                <div class="resource-card">
                    <div class="resource-header">
                        <div class="resource-title">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V4a2 2 0 00-2-2H6zm1 2a1 1 0 000 2h6a1 1 0 100-2H7zm6 7a1 1 0 011 1v3a1 1 0 11-2 0v-3a1 1 0 011-1zm-3 3a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zm-4-1a1 1 0 011 1v3a1 1 0 11-2 0v-3a1 1 0 011-1z" clip-rule="evenodd"/>
                            </svg>
                            <span>CPU</span>
                        </div>
                        <div class="resource-value" id="cpuPercent">--%</div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="cpuBar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"></div>
                    </div>
                    <div class="resource-details">
                        <span id="cpuDetail">Total CPU Usage</span>
                        <button class="link-btn" id="viewCpuDetails">View Processes</button>
                    </div>
                </div>
                <div class="resource-card">
                    <div class="resource-header">
                        <div class="resource-title">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M13 7H7v6h6V7z"/>
                                <path fill-rule="evenodd" d="M7 2a1 1 0 012 0v1h2V2a1 1 0 112 0v1h2a2 2 0 012 2v2h1a1 1 0 110 2h-1v2h1a1 1 0 110 2h-1v2a2 2 0 01-2 2h-2v1a1 1 0 11-2 0v-1H9v1a1 1 0 11-2 0v-1H5a2 2 0 01-2-2v-2H2a1 1 0 110-2h1V9H2a1 1 0 010-2h1V5a2 2 0 012-2h2V2zM5 5h10v10H5V5z" clip-rule="evenodd"/>
                            </svg>
                            <span>Memory</span>
                        </div>
                        <div class="resource-value" id="memoryPercent">--%</div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="memoryBar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"></div>
                    </div>
                    <div class="resource-details">
                        <span id="memoryDetail">-- GB / -- GB</span>
                        <button class="link-btn" id="viewMemoryDetails">View Details</button>
                    </div>
                </div>
                <div class="resource-card">
                    <div class="resource-header">
                        <div class="resource-title">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M3 5a2 2 0 012-2h10a2 2 0 012 2v8a2 2 0 01-2 2h-2.22l.123.489.804.804A1 1 0 0113 18H7a1 1 0 01-.707-1.707l.804-.804L7.22 15H5a2 2 0 01-2-2V5zm5.771 7H5V5h10v7H8.771z" clip-rule="evenodd"/>
                            </svg>
                            <span>Disk (C:)</span>
                        </div>
                        <div class="resource-value" id="diskPercent">--%</div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="diskBar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"></div>
                    </div>
                    <div class="resource-details">
                        <span id="diskDetail">-- GB / -- GB</span>
                        <button class="link-btn" id="viewAllDrives">View All Drives</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Critical Services Section -->
        <section class="services-section collapsible" aria-labelledby="services-title">
            <div class="section-header">
                <h2 id="services-title" class="section-title">Critical Services</h2>
                <button class="expand-btn" id="toggleServices" aria-label="Toggle Services Section" aria-expanded="true">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"/>
                    </svg>
                </button>
            </div>
            <div class="section-content" id="servicesContent">
                <div class="services-list" id="servicesList">
                    <!-- Services will be populated by JavaScript -->
                </div>
                <button class="link-btn expand-link" id="viewAllServices">View All Services (12)</button>
            </div>
        </section>

        <!-- Recent Alerts Section -->
        <section class="alerts-section collapsible" aria-labelledby="alerts-title">
            <div class="section-header">
                <h2 id="alerts-title" class="section-title">Recent Alerts</h2>
                <button class="expand-btn" id="toggleAlerts" aria-label="Toggle Alerts Section" aria-expanded="true">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"/>
                    </svg>
                </button>
            </div>
            <div class="section-content" id="alertsContent">
                <div class="alerts-list" id="alertsList">
                    <div class="empty-state">
                        <svg width="48" height="48" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                        </svg>
                        <p>No active alerts</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="dashboard-footer" role="contentinfo">
            <div class="footer-content">
                <div class="footer-left">
                    <span>WinSysAuto v1.0.0</span>
                    <span class="separator">|</span>
                    <span>Logged in as: <strong id="currentUser">CONTOSO\admin</strong></span>
                </div>
                <div class="footer-right">
                    <span>Auto-refresh: <strong id="autoRefreshStatus">ON (30s)</strong></span>
                    <button class="link-btn" id="viewDocumentation">Documentation</button>
                    <button class="link-btn" id="viewAbout">About</button>
                </div>
            </div>
        </footer>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer" role="status" aria-live="polite"></div>

    <!-- Modal: Add Users -->
    <div class="modal" id="addUsersModal" role="dialog" aria-labelledby="addUsersTitle" aria-modal="true">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="addUsersTitle">Add Users from CSV</h3>
                <button class="close-btn" aria-label="Close Modal">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="csvFile">Upload CSV File:</label>
                    <input type="file" id="csvFile" accept=".csv" class="file-input">
                    <div class="file-info">
                        <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
                        </svg>
                        <span>CSV format: Username,FirstName,LastName,Email,Groups</span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="defaultOU">Default OU (optional):</label>
                    <input type="text" id="defaultOU" placeholder="OU=Users,DC=contoso,DC=com" class="text-input">
                </div>
                <div class="form-group">
                    <h4>Options:</h4>
                    <label class="checkbox-label">
                        <input type="checkbox" id="autoCreateGroups" checked>
                        <span>Auto-create security groups</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="sendWelcomeEmail" checked>
                        <span>Send welcome email</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="resetPasswords">
                        <span>Reset passwords if user exists</span>
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelAddUsers">Cancel</button>
                <button class="btn btn-primary" id="confirmAddUsers">Create Users →</button>
            </div>
        </div>
    </div>

    <!-- Modal: Backup Confirmation -->
    <div class="modal" id="backupModal" role="dialog" aria-labelledby="backupTitle" aria-modal="true">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="backupTitle">Confirm Backup</h3>
                <button class="close-btn" aria-label="Close Modal">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="warning-box">
                    <svg width="24" height="24" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                    </svg>
                    <p><strong>Create configuration backup?</strong></p>
                </div>
                <div class="info-list">
                    <p>This will backup:</p>
                    <ul>
                        <li>Group Policy Objects</li>
                        <li>DHCP Configuration</li>
                        <li>DNS Forwarders</li>
                        <li>Latest Health Reports</li>
                    </ul>
                    <p><strong>Estimated time:</strong> 2-3 minutes</p>
                    <p><strong>Backup location:</strong> C:\ProgramData\WinSysAuto\Backups</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelBackup">Cancel</button>
                <button class="btn btn-primary" id="confirmBackup">Create Backup</button>
            </div>
        </div>
    </div>

    <!-- Modal: Progress -->
    <div class="modal" id="progressModal" role="dialog" aria-labelledby="progressTitle" aria-modal="true">
        <div class="modal-overlay"></div>
        <div class="modal-content modal-small">
            <div class="modal-body">
                <div class="progress-info">
                    <div class="spinner-large"></div>
                    <h3 id="progressTitle">Running Health Check...</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressBar" style="width: 0%"></div>
                    </div>
                    <p id="progressText">Initializing...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="/app.js"></script>
</body>
</html>
